[build]
  command = "npm ci && npx vite build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

# Redirects for SPA routing
[[redirects]]
  from = "/privacy"
  to = "/privacy.html"
  status = 200

[[redirects]]
  from = "/terms"
  to = "/terms.html"
  status = 200

[[redirects]]
  from = "/privacy-policy"
  to = "/privacy.html"
  status = 301

[[redirects]]
  from = "/terms-of-service"
  to = "/terms.html"
  status = 301

[[redirects]]
  from = "/privacy-policy.html"
  to = "/privacy.html"
  status = 301

[[redirects]]
  from = "/terms-of-service.html"
  to = "/terms.html"
  status = 301

[[redirects]]
  from = "/auth/callback"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/invite/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
