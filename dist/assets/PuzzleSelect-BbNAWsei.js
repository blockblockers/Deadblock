import{r as n,P as c,u as z,j as e,N as k,a as $,F as E,L as B,Z as C,A,s as m,g as T}from"./index-8HZmLUul.js";import{F as D}from"./FloatingPieces-CkGA4VAV.js";import{T as P}from"./timer-CKvbxT7p.js";import{A as F}from"./alert-circle-DwjqkFl6.js";const I={easy:{gridColor:"rgba(34,197,94,0.5)",glow1:{color:"bg-green-500/40",pos:"top-20 left-10"},glow2:{color:"bg-emerald-400/30",pos:"bottom-32 right-10"},glow3:{color:"bg-lime-500/20",pos:"top-1/2 left-1/2"},cardBg:"bg-gradient-to-br from-slate-900/95 via-green-950/50 to-slate-900/95",cardBorder:"border-green-500/50",cardShadow:"shadow-[0_0_60px_rgba(34,197,94,0.4),inset_0_0_30px_rgba(34,197,94,0.1)]"},medium:{gridColor:"rgba(251,191,36,0.5)",glow1:{color:"bg-amber-500/40",pos:"top-10 right-20"},glow2:{color:"bg-orange-500/35",pos:"bottom-20 left-10"},glow3:{color:"bg-red-500/20",pos:"top-1/3 left-1/3"},cardBg:"bg-gradient-to-br from-slate-900/95 via-amber-950/50 to-slate-900/95",cardBorder:"border-amber-500/50",cardShadow:"shadow-[0_0_60px_rgba(251,191,36,0.4),inset_0_0_30px_rgba(251,191,36,0.1)]"},hard:{gridColor:"rgba(168,85,247,0.5)",glow1:{color:"bg-purple-500/40",pos:"top-16 left-20"},glow2:{color:"bg-pink-500/35",pos:"bottom-24 right-16"},glow3:{color:"bg-violet-500/25",pos:"top-2/3 right-1/3"},cardBg:"bg-gradient-to-br from-slate-900/95 via-purple-950/50 to-slate-900/95",cardBorder:"border-purple-500/50",cardShadow:"shadow-[0_0_60px_rgba(168,85,247,0.4),inset_0_0_30px_rgba(168,85,247,0.1)]"},speed:{gridColor:"rgba(239,68,68,0.5)",glow1:{color:"bg-red-500/40",pos:"top-10 left-20"},glow2:{color:"bg-orange-500/35",pos:"bottom-24 right-10"},glow3:{color:"bg-amber-500/20",pos:"top-1/2 right-1/3"},cardBg:"bg-gradient-to-br from-slate-900/95 via-red-950/50 to-slate-900/95",cardBorder:"border-red-500/50",cardShadow:"shadow-[0_0_60px_rgba(239,68,68,0.4),inset_0_0_30px_rgba(239,68,68,0.1)]"}},b=[{id:c.EASY,name:"EASY",moves:1,description:"1 move to win. But watch out for traps!",theme:"easy",colors:{gradient:"from-green-600 to-emerald-600",glow:"rgba(34,197,94,0.6)",text:"text-green-300",ring:"ring-green-500/50",bg:"bg-green-900/30",border:"border-green-500/40"}},{id:c.MEDIUM,name:"MEDIUM",moves:3,description:"3 moves to solve. A solid challenge.",theme:"medium",colors:{gradient:"from-amber-500 to-orange-600",glow:"rgba(251,191,36,0.6)",text:"text-amber-300",ring:"ring-amber-500/50",bg:"bg-amber-900/30",border:"border-amber-500/40"}},{id:c.HARD,name:"HARD",moves:5,description:"5 moves to solve. For puzzle masters.",theme:"hard",colors:{gradient:"from-purple-500 to-pink-600",glow:"rgba(168,85,247,0.6)",text:"text-purple-300",ring:"ring-purple-500/50",bg:"bg-purple-900/30",border:"border-purple-500/40"}},{id:"speed",name:"SPEED",moves:null,description:"Beat the clock! 10 seconds per puzzle.",theme:"speed",isSpeed:!0,colors:{gradient:"from-red-500 to-orange-600",glow:"rgba(239,68,68,0.6)",text:"text-red-300",ring:"ring-red-500/50",bg:"bg-red-900/30",border:"border-red-500/40"}}],Z=({onSelectPuzzle:f,onSpeedMode:w,onBack:v})=>{const[o,p]=n.useState(!1),[j,g]=n.useState(0),[u,x]=n.useState(null),[d,y]=n.useState(c.EASY),{needsScroll:l}=z(750),[h]=n.useState(()=>{try{return parseInt(localStorage.getItem("speed-puzzle-best")||"0",10)}catch{return 0}}),a=b.find(t=>t.id===d)||b[0],s=I[a.theme],N=t=>{m.playClickSound("select"),y(t)},S=async()=>{if(m.playButtonClick(),d==="speed"){w?.();return}p(!0),x(null),g(0);try{const t=await T(d,!1,(r,i)=>{g(Math.round(r/i*100))});t?(g(100),await new Promise(r=>setTimeout(r,200)),f(t)):(x("Could not generate puzzle. Try again."),p(!1))}catch{x("Something went wrong. Try again."),p(!1)}},_=()=>{m.playButtonClick(),v()};return e.jsxs("div",{className:l?"min-h-screen bg-slate-950":"h-screen bg-slate-950 overflow-hidden",style:l?{overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",touchAction:"pan-y"}:{},children:[e.jsx("div",{className:"fixed inset-0 opacity-40 pointer-events-none transition-all duration-700",style:{backgroundImage:`linear-gradient(${s.gridColor} 1px, transparent 1px), linear-gradient(90deg, ${s.gridColor} 1px, transparent 1px)`,backgroundSize:"40px 40px"}}),e.jsx("div",{className:`fixed ${s.glow1.pos} w-80 h-80 ${s.glow1.color} rounded-full blur-3xl pointer-events-none transition-all duration-700`}),e.jsx("div",{className:`fixed ${s.glow2.pos} w-72 h-72 ${s.glow2.color} rounded-full blur-3xl pointer-events-none transition-all duration-700`}),e.jsx("div",{className:`fixed ${s.glow3.pos} w-64 h-64 ${s.glow3.color} rounded-full blur-3xl pointer-events-none transition-all duration-700`}),e.jsx(D,{count:12,theme:"puzzle",minOpacity:.2,maxOpacity:.4}),e.jsxs("div",{className:`relative ${l?"min-h-screen":"h-full"} flex flex-col items-center justify-center px-4 ${l?"py-6":"py-3"}`,children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(k,{size:"large"}),e.jsx($,{text:"PUZZLE MODE",size:"small",className:"mt-1"})]}),e.jsxs("div",{className:`${s.cardBg} backdrop-blur-md rounded-2xl p-5 border ${s.cardBorder} ${s.cardShadow} transition-all duration-700`,children:[e.jsx("div",{className:"space-y-2 mb-4",children:b.map(t=>{const r=d===t.id,i=t.isSpeed;return e.jsxs("button",{onClick:()=>N(t.id),className:`w-full p-3 rounded-xl transition-all relative overflow-hidden ${r?`bg-gradient-to-r ${t.colors.gradient} text-white shadow-lg`:`${t.colors.bg} ${t.colors.border} border hover:scale-[1.02]`}`,style:r?{boxShadow:`0 0 25px ${t.colors.glow}`}:{},children:[r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shine"}),i&&r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/20 via-orange-500/20 to-red-500/20 animate-speed-pulse"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("h3",{className:`font-black tracking-wide text-base ${r?"text-white":t.colors.text}`,children:t.name}),i?e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-1 ${r?"bg-white/20 text-white":"bg-red-500/30 text-red-300"}`,children:[e.jsx(P,{size:10}),"10s"]}):e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${r?"bg-white/20 text-white":"bg-slate-700/50 text-slate-400"}`,children:[t.moves," ",t.moves===1?"move":"moves"]}),i&&h>0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-500/30 text-amber-300 text-xs",children:[e.jsx(E,{size:10}),h]})]}),e.jsx("p",{className:`text-xs ${r?"text-white/80":"text-slate-400"}`,children:t.description})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 ml-2 ${r?"border-white bg-white":"border-slate-600"}`,children:r&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"})})]})]},t.id)})}),a.isSpeed&&e.jsx("div",{className:"mb-5 p-3 bg-slate-800/50 rounded-xl border border-red-500/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"speed-info-title font-black tracking-[0.2em] text-xs",children:"HOW IT WORKS"}),e.jsxs("div",{className:"mt-2 text-sm text-slate-400 space-y-1",children:[e.jsxs("p",{children:["Find the ",e.jsx("span",{className:"text-white font-medium",children:"ONE winning move"})," before time runs out!"]}),e.jsx("p",{className:"text-red-300",children:"‚è± 10 seconds per puzzle"}),e.jsx("p",{children:"Build your streak - how far can you go?"})]})]})}),e.jsx("style",{children:`
              .speed-info-title {
                font-family: system-ui, -apple-system, sans-serif;
                color: #fff;
                text-shadow:
                  0 0 5px #fff,
                  0 0 10px #fff,
                  0 0 20px #ef4444,
                  0 0 40px #ef4444,
                  0 0 60px #f97316;
                animation: turn-order-pulse 3s ease-in-out infinite;
              }
              @keyframes turn-order-pulse {
                0%, 100% {
                  text-shadow:
                    0 0 5px #fff,
                    0 0 10px #fff,
                    0 0 20px #ef4444,
                    0 0 40px #ef4444,
                    0 0 60px #f97316;
                  filter: brightness(1);
                }
                50% {
                  text-shadow:
                    0 0 5px #fff,
                    0 0 15px #fff,
                    0 0 30px #ef4444,
                    0 0 50px #ef4444,
                    0 0 70px #f97316;
                  filter: brightness(1.1);
                }
              }
            `}),u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500/50 rounded-lg flex items-center gap-2",children:[e.jsx(F,{size:16,className:"text-red-400"}),e.jsx("span",{className:"text-red-300 text-sm",children:u})]}),e.jsx("button",{onClick:S,disabled:o,className:`w-full p-3 rounded-xl font-black tracking-wider text-base transition-all flex items-center justify-center gap-2 ${o?"bg-slate-700 text-slate-400 cursor-wait":`bg-gradient-to-r ${a.colors.gradient} text-white hover:scale-[1.02] active:scale-[0.98]`}`,style:o?{}:{boxShadow:`0 0 30px ${a.colors.glow}`},children:o?e.jsxs(e.Fragment,{children:[e.jsx(B,{size:18,className:"animate-spin"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs",children:"GENERATING..."}),e.jsxs("div",{className:"text-[10px] opacity-70",children:[j,"%"]})]})]}):a.isSpeed?e.jsxs(e.Fragment,{children:[e.jsx(C,{size:18}),"START SPEED MODE"]}):e.jsxs(e.Fragment,{children:["START ",a.name," PUZZLE"]})}),e.jsxs("button",{onClick:_,disabled:o,className:"w-full mt-3 py-2.5 px-4 rounded-xl font-bold text-sm text-slate-300 bg-slate-800/70 hover:bg-slate-700/70 transition-all border border-slate-600/50 hover:border-slate-500/50 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(100,116,139,0.2)] disabled:opacity-50",children:[e.jsx(A,{size:16}),"BACK TO MENU"]})]})]}),l&&e.jsx("div",{className:"h-6 flex-shrink-0"})]}),e.jsx("style",{children:`
        @keyframes shine {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(200%); }
        }
        .animate-shine {
          animation: shine 1.5s ease-in-out infinite;
        }
        
        @keyframes speed-pulse {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 0.6; }
        }
        .animate-speed-pulse {
          animation: speed-pulse 2s ease-in-out infinite;
        }
      `})]})};export{Z as default};
