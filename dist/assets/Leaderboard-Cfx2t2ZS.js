import{q as R,r as i,a6 as x,j as e,A as C,T as m,y as z,M as g,s as b,E}from"./index-8HZmLUul.js";import{T as $}from"./trending-up-D4E_By2q.js";const A=({onBack:j})=>{const{profile:a}=R(),[f,N]=i.useState([]),[d,o]=i.useState(!0),[u,h]=i.useState(null),[t,y]=i.useState("rating");i.useEffect(()=>{p()},[t]);const p=async()=>{if(!x){o(!1);return}o(!0);try{let s=x.from("profiles").select("*").order(t==="rating"?"rating":t==="wins"?"games_won":"games_played",{ascending:!1}).limit(100);const{data:l,error:r}=await s;if(r)console.error("Error loading leaderboard:",r);else if(N(l||[]),a?.id){const n=l?.findIndex(c=>c.id===a.id);if(n!==-1)h(n+1);else{const{count:c}=await x.from("profiles").select("*",{count:"exact",head:!0}).gt(t==="rating"?"rating":t==="wins"?"games_won":"games_played",t==="rating"?a.rating:t==="wins"?a.games_won:a.games_played);h((c||0)+1)}}}catch(s){console.error("Error:",s)}o(!1)},v=()=>{b.playButtonClick(),j()},w=()=>{b.playClickSound("select"),p()},k=s=>s===1?e.jsx(E,{size:20,className:"text-amber-400"}):s===2?e.jsx(g,{size:20,className:"text-slate-300"}):s===3?e.jsx(g,{size:20,className:"text-amber-600"}):e.jsx("span",{className:"text-slate-500 text-sm font-bold w-5 text-center",children:s}),_=s=>s===1?"bg-gradient-to-r from-amber-900/40 to-yellow-900/40 border-amber-500/40":s===2?"bg-gradient-to-r from-slate-700/40 to-slate-600/40 border-slate-400/40":s===3?"bg-gradient-to-r from-amber-800/30 to-orange-900/30 border-amber-600/30":"bg-slate-800/40 border-slate-700/30";return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"fixed inset-0 opacity-30 pointer-events-none",style:{backgroundImage:"linear-gradient(rgba(251,191,36,0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(251,191,36,0.2) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),e.jsx("div",{className:"fixed top-1/4 left-1/2 -translate-x-1/2 w-96 h-96 bg-amber-500/20 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"relative min-h-screen px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:v,className:"p-2 text-slate-400 hover:text-cyan-300 transition-colors",children:e.jsx(C,{size:24})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-2xl font-black text-amber-400 flex items-center gap-2",children:[e.jsx(m,{size:28}),"LEADERBOARD"]})})]}),e.jsx("button",{onClick:w,disabled:d,className:"p-2 text-slate-400 hover:text-cyan-300 transition-colors disabled:opacity-50",children:e.jsx(z,{size:20,className:d?"animate-spin":""})})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:[{id:"rating",label:"Rating",icon:$},{id:"wins",label:"Wins",icon:m},{id:"games",label:"Games",icon:g}].map(s=>e.jsxs("button",{onClick:()=>{b.playClickSound("select"),y(s.id)},className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${t===s.id?"bg-amber-500/20 text-amber-400 border border-amber-500/40":"bg-slate-800/50 text-slate-500 border border-slate-700/50 hover:text-slate-300"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),a&&u&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-900/40 to-blue-900/40 rounded-xl p-4 mb-4 border border-cyan-500/40",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white font-bold",children:a.username?.[0]?.toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-cyan-300 font-bold",children:a.username}),e.jsx("div",{className:"text-cyan-600 text-xs",children:"Your Rank"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-black text-cyan-400",children:["#",u]}),e.jsx("div",{className:"text-cyan-600 text-xs",children:t==="rating"?`${a.rating} pts`:t==="wins"?`${a.games_won} wins`:`${a.games_played} games`})]})]})}),e.jsx("div",{className:"bg-slate-900/90 backdrop-blur-md rounded-2xl p-4 border border-slate-700/50",children:d?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"Loading rankings..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{size:48,className:"text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500",children:"No players yet"})]}):e.jsx("div",{className:"space-y-2",children:f.map((s,l)=>{const r=l+1,n=s.id===a?.id;return e.jsxs("div",{className:`p-3 rounded-lg border flex items-center gap-3 transition-all ${n?"bg-cyan-900/30 border-cyan-500/40 ring-1 ring-cyan-500/30":_(r)}`,children:[e.jsx("div",{className:"w-8 flex justify-center",children:k(r)}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-sm ${r===1?"bg-gradient-to-br from-amber-400 to-yellow-600":r===2?"bg-gradient-to-br from-slate-300 to-slate-500":r===3?"bg-gradient-to-br from-amber-600 to-orange-700":"bg-slate-700"}`,children:s.username?.[0]?.toUpperCase()||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium ${n?"text-cyan-300":"text-white"}`,children:[s.username,n&&e.jsx("span",{className:"text-cyan-500 text-xs ml-2",children:"(You)"})]}),e.jsxs("div",{className:"text-slate-600 text-xs",children:[s.games_played," games â€¢ ",s.games_won," wins"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`font-bold ${r===1?"text-amber-400":r===2?"text-slate-300":r===3?"text-amber-600":"text-slate-400"}`,children:t==="rating"?s.rating:t==="wins"?s.games_won:s.games_played}),e.jsx("div",{className:"text-slate-600 text-xs",children:t==="rating"?"rating":t==="wins"?"wins":"games"})]})]},s.id)})})})]})})]})};export{A as default};
